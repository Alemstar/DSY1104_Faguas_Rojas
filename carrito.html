<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mi carrito de compras</title>
  <link rel="stylesheet" href="Index.css">
</head>
<body>
  <!-- Header / Nav: reusar la estructura del proyecto -->
  <header class="site-header">
    <div class="container nav-bar">
      <a class="brand" href="./" aria-label="Ir al inicio">
        <img src="assets/logo_pasteleria_mil_sabores.png" alt="Logo Mil Sabores" class="logo" aria-hidden="true">
        <span>Mil Sabores</span>
      </a>

      <nav class="primary-nav" aria-label="Principal">
        <ul class="menu">
          <li><a href="./" aria-current="page">Home</a></li>
          <li><a href="./productos.html">Productos</a></li>
          <li><a href="./personalizaTuTorta.html">Personaliza tu torta</a></li>
          <li><a href="./recetasBlogs.html">Recetas/Blogs</a></li>
          <li><a href="./contacto.html">Contacto</a></li>
          <div class="acciones-usuario">
          </div>
        </ul>
      </nav>

      <button class="btn-icon" type="button" aria-label="Abrir carrito" onclick="window.location.href='./carrito.html'">
        🛒 <span class="badge" id="cart-count" aria-live="polite">0</span>
      </button>
  </header>

  <main class="container carrito-main" style="display:flex; gap:2rem; margin-top:1.5rem;">
    <section class="carrito-section" style="flex:1;">
      <h1>Mi carrito de compras</h1>
      <div id="cart-items" class="cart-items-list" style="display:flex; flex-direction:column; gap:1rem; margin-top:1rem;">
        <!-- items injected here -->
      </div>
    </section>
    <aside class="carrito-aside" style="width:340px; background:var(--surface); padding:1rem; border-radius:8px; border:1px solid var(--border);">
      <h3>TOTAL:</h3>
      <div id="cart-total" style="font-size:1.4rem; font-weight:700; margin-bottom:1rem;">$ 0</div>
      <div style="margin-bottom:.5rem;">
        <strong>Beneficios disponibles (mock):</strong>
        <ul style="margin:.25rem 0 0 1rem; padding:0; list-style:disc;">
          <li>-50% para mayores de 50 años (aplica al subtotal)</li>
          <li>-10% con código <code>FELICES50</code></li>
          <li>"Torta gratis" en cumpleaños Duoc (una unidad gratis)</li>
        </ul>
      </div>
      <label style="display:block; margin-bottom:.5rem;">Cupón</label>
      <div style="display:flex; gap:.5rem; margin-bottom:1rem;"><input id="coupon" placeholder="Ingresa cupón" style="flex:1; padding:.5rem; border-radius:6px; border:1px solid var(--border);" /><button id="apply-coupon" class="btn-secondary">APLICAR</button></div>
      <div id="discount-breakdown" style="background:transparent; padding:.5rem; border-radius:6px; font-size:.95rem; color:var(--text); margin-bottom: .5rem;"></div>
      <div style="display:flex; gap:.5rem;">
        <button id="clear-cart" class="btn-outline" style="flex:1;">VACÍAR</button>
        <button id="checkout" class="btn-primary" style="flex:2;">PAGAR</button>
      </div>
    </aside>
  </main>

  <!-- Confirm modal (hidden by default). Accessible: role=dialog, aria-modal -->
  <div id="confirm-modal" role="dialog" aria-modal="true" aria-hidden="true" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.4); z-index:9999; align-items:center; justify-content:center;">
    <div role="document" style="background:var(--surface); padding:1.25rem; border-radius:8px; width:min(90%,420px); margin:auto; box-shadow:0 8px 30px rgba(0,0,0,0.2);">
      <h2 id="confirm-title" style="margin-top:0;">Confirmar acción</h2>
      <p id="confirm-message">¿Estás seguro de que deseas vaciar el carrito? Esta acción no se puede deshacer.</p>
      <div style="display:flex; gap:.5rem; justify-content:flex-end; margin-top:1rem;">
        <button id="confirm-cancel" class="btn-outline">Cancelar</button>
        <button id="confirm-ok" class="btn-primary">Vaciar</button>
      </div>
    </div>
  </div>

  <script type="module" src="carrito-page.js"></script>
</body>
</html>
